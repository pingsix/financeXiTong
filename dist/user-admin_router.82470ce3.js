webpackJsonp([4],{107:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function controller(_,$timeout,service,$state){var o,timer;_.startDate="",_.endDate="",_.createUserId="",_.status="",_.type="",_.key="",_.pageNo=1,_.pageSize=10,_.count="",_.selectOption={type:"select",name:"Service",value:"10条",values:["10条","20条","30条","40条","50条"]},_.editUser=function(id){$state.go("manager.editUser",{id:id})},_.admin="",_.UserInfoList=[],_.selectAllFlag=!1,_.isSuperAdmin=2==localStorage.getItem("userType"),_.selectChange=function(data){var num=parseInt(data.replace(/(\d+)\D/,"$1"));_.pageSize=num,_.selectOption.value=num+"条",o.laterQueryList(),_.pageNo=1,o.laterQueryList()},_.checkBoxManage=!1,_.allChecked=function(){_.UserInfoList.forEach(function(v){v.CheckboxFlag=_.checkBoxManage})},_.delAllAction=function(){var idsArr=[],cfg={};(function(){var arr=_.UserInfoList.slice(0);return arr.forEach(function(v,i,arr){var isArrJson={};v.CheckboxFlag&&(isArrJson.id=v.id,isArrJson.userId=v.userId,idsArr.push(isArrJson))}),idsArr})();if(idsArr.length){if(!confirm("确认删除？"))return;cfg.queries=idsArr,service.query("/acc/reviewuser/del.do",cfg).then(function(data){o.laterQueryList()},function(reason){return 200!==reason.status?void alert(reason.message):void alert(reason.responseMsg)})}},_.tableClick=function(evt){var ids2=[];_.UserInfoList.forEach(function(v,i,arr){v.CheckboxFlag&&ids2.push(v.id)});_.isActive2=ids2.length?"delboxR-Active":""},_.deblocking=function(item){service.deblock({id:item.id}).then(function(data){o.laterQueryList(),alert("该用户已解除锁定")},function(reason){alert(reason.responseMsg)})},_.watchChecked2=function(){var checked=[],allcheckBox=[];if(_.UserInfoList.length){for(var i=0,checkBox=_.UserInfoList;i<checkBox.length;i++)checkBox[i].beAccept||allcheckBox.push(checkBox[i]),checkBox[i].CheckboxFlag&&checked.push(checkBox[i]);checked.length<allcheckBox.length?_.checkBoxManage=!1:_.checkBoxManage=!0}},_.emitPassword=function(id){id&&(_dialog_mask2.default.show(),service.emitPaw(id).then(function(data){},function(reason){"020"==reason.responseCode?(alert("发送邮件失败"),_dialog_mask2.default.hidden()):"021"==reason.responseCode?(alert("发送邮件成功"),_dialog_mask2.default.hidden()):(console.log(reason.responseMsg),_dialog_mask2.default.hidden())}))},o={laterQueryList:function(){var that=this;timer&&clearTimeout(timer),timer=setTimeout(function(){that.getUserInfoList()},500)},getUserInfoList:function(){var cfg={pageSize:_.pageSize,pageNo:_.pageNo};service.getUserInfoList(cfg).then(function(data){_.UserInfoList=data.result,_.UserInfoList&&(_.UserInfoList.forEach(function(v,i,arr){v.CheckboxFlag=_.selectAllFlag}),_.checkBoxManage=!1,0==data.result.length&&1!==_.pageNo&&(_.pageNo=_.pageNo-1,o.getUserInfoList()),_.selectAllFlag=!1,_.count=data.totalCount,_.$broadcast("EVT_PAGE_CHANGE",{total:data.totalPages,current:_.pageNo}))},function(reason){console.log(reason.responseMsg)})},init:function(){this.getUserInfoList()}},o.init(),_.$on("EVT_PAGE_SELECTED",function(evt,data){_.pageNo=data.pageSelectedNum,o.getUserInfoList()})}Object.defineProperty(exports,"__esModule",{value:!0});var _dialog_mask=__webpack_require__(108),_dialog_mask2=_interopRequireDefault(_dialog_mask),dependArr=[__webpack_require__(110).default.name];exports.default={module:angular.module("userAdminCtrl",dependArr).controller("managerNewUserController",["$scope","$timeout","userAdminService","$state",controller]),template:__webpack_require__(111)}},108:function(module,exports,__webpack_require__){var $=__webpack_require__(109),mask={crrentHeight:0,defaultStyle:function(){return{height:"auto",zIndex:1e3,display:"block",opacity:.7,background:"#000",position:"absolute",top:0,right:0,bottom:0,left:0}},creatMask:function(pn,cg){if(!pn)throw new Error("parent element is null ! plase creat element  fill secend param(only id)");var wrapName,maskElm;wrapName=$("#"+pn),maskElm=document.createElement("div"),maskElm.id="maskDialog",wrapName.append(maskElm);var maskConfig=cg||Object.keys(cg).length||this.defaultStyle();this.maskAddStyle(maskConfig)},addStyle:function(styleList){var elm=$("#maskDialog");if(!$("#maskDialog").size())throw new Error("the id#maskDialog is no defined");elm.css(styleList)},maskAddStyle:function(maskConfig){if(!maskConfig||!Object.keys(maskConfig).length)return void this.addStyle(this.defaultStyle());var initStyle=this.defaultStyle(),styleList={};for(var k in initStyle)maskConfig[k]?styleList[k]=maskConfig[k]:styleList[k]=initStyle[k];styleList.height=this.isLessClient(styleList.height),this.addStyle(styleList)},isLessClient:function(setHeight){var clientHeight=document.documentElement.clientHeight;return setHeight<clientHeight?(this.crrentHeight=clientHeight,clientHeight):(this.crrentHeight=setHeight,setHeight)},getHeight:function(){return this.crrentHeight}};const maskCtrl={show:function(config,pushElmName){document.getElementById("maskDialog")?mask.maskAddStyle(config):mask.creatMask(pushElmName,config)},hidden:function(){var recoverHeight=document.documentElement.clientHeight;mask.maskAddStyle({display:"none",height:recoverHeight})},getHeight:function(){return mask.getHeight()}};module.exports=maskCtrl},110:function(module,exports){"use strict";function userAdminService(util,ajax){return{setSelectedLi:function(current){var parent=util.parent(current,"ul");angular.element(parent).find("li").removeClass("selected"),angular.element(current).parent().addClass("selected")},getUserInfoList:function(cfg){return ajax.post("/acc/reviewuser/getUser.do",cfg)},query:function(url,cfg){return ajax.post(url,cfg)},emitPaw:function(id){return ajax.post("/acc/reviewuser/sendRandomPwd.do",{uid:id})},deblock:function(cfg){return ajax.post("/acc/reviewuser/userUnlock.do",cfg)}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=angular.module("UserAdminSer",[]).factory("userAdminService",["util","ajax",userAdminService])},111:function(module,exports){module.exports='<div class="main">\r\n\t<div class="inner">\r\n\t    <div class="inner-header">\r\n\t        <div class="inner-header-lf fl">用户管理</div>\r\n\t\r\n\t        <div class="add_user" ng-if="!isSuperAdmin">\r\n\t            <a ui-sref ="manager.newUser">\r\n\t                <span class="add"></span>\r\n\t                <span>新建用户</span>\r\n\t            </a>\r\n\t        </div>\r\n\t    </div>\r\n\t    <div class="inner-body">\r\n\t        <div class="hdFixed">\r\n\t            <div class="hd id" id="tableHD">\r\n\t                <p class="contentR_shezhi contentR_shezhi01">\r\n\t                    <label ng-click="selectAll();tableClick($event)">\r\n\t                        <input ng-click = "allChecked()" ng-checked = "checkBoxManage" ng-model = "checkBoxManage" type="checkbox" class="c1" id="selectAll">\r\n\t                        <span class="all">全选</span>\r\n\t                    </label>\r\n\t\r\n\t                    <span class="delboxR {{isActive2}}" ng-click="delAllAction()">\r\n\t                        <span class="delR"></span>\r\n\t                        <span>删除</span>\r\n\t                    </span>\r\n\t                </p>\r\n\t            </div>\r\n\t        </div>\r\n\t\r\n\t        <div  class="inner-table" style="margin: 0 23px">\r\n\t            <table class="table_user oddEvenColor" ng-click="tableClick($event)">\r\n\t                <tr class="tr_header">\r\n\t                    <td class="c2"></td>\r\n\t                    <td>账号</td>\r\n\t                    <td>姓名</td>\r\n\t                    <td style="width:34%">角色名称</td>\r\n\t                    <td>创建时间</td>\r\n\t                    <td>备注</td>\r\n\t                    <td style="width:100px">账户锁定</td>\r\n\t                    <td style="width: 15%;">操作</td>\r\n\t                    \r\n\t                </tr>\r\n\t                <tr ng-repeat="item in UserInfoList">\r\n\t                    <td><input type="checkbox"  ng-change = "watchChecked2()" ng-model="item.CheckboxFlag" ng-checked="item.CheckboxFlag"></td>\r\n\t                    <td ng-bind="item.userId"></td>\r\n\t                    <td ng-bind="item.userName"></td>\r\n\t                    <td>                    \r\n\t                    \t<span ng-repeat = "i in item.groups" >\r\n\t                    \t\t{{i.groupName}}&nbsp;&nbsp;&nbsp;\r\n\t                    \t</span>\r\n\t                    <td ng-bind="item.createTime.time|timeFilter"></td>\r\n\t                    <td ng-bind="item.spare1"></td>\r\n\t                    <td><a href="javascript:void(0)" ng-click = "deblocking(item)" style="color: #81abe9;" ng-bind = "item.isLocked|deblockFilter"></a></td>\r\n\t                    <td>\r\n\t                        <a class="mlr5" href="javascript:void(0)" ng-click = "editUser(item.id)">编辑</a>\r\n\t                        <a class="mlr5" ng-click = "emitPassword(item.id)" href="javascript:void(0)">生成随机密码</a>\r\n\t                    </td>\r\n\t                </tr>\r\n\t            </table>\r\n\t        </div>\r\n\t\r\n\t        <div class="ft clearfix yeshu">\r\n\t            <div class="fl ft-lf">\r\n\t                共<span ng-bind="count"></span>条 每页显示\r\n\t                <select ng-model="selectOption.value" ng-change="selectChange(selectOption.value)" ng-options="v for v in selectOption.values"></select>\r\n\t            </div>\r\n\t            <div class="fr ft-rt">\r\n\t                <div class="page">\r\n\t                    <span page></span>\r\n\t                </div>\r\n\t            </div>\r\n\t        </div>\r\n\t    </div>\r\n\t    <div class="inner-footer"></div>\r\n\t</div>\r\n\t<div id="report-template-mask" ng-style="{display:isShowReportDialog ? \'block\' : \'none\'}"></div>\r\n</div>'}});